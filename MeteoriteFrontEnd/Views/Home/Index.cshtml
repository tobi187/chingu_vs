@model IEnumerable<MeteroiteBackEnd.MeteoriteApiModel.WebModel>
@{
    ViewData["Title"] = "Meteorite Page";
}

<div class="text-center">
    <h1 class="display-4">Meteorite Explorer</h1>
</div>

<br />

<div class="text-center">
    @using (Html.BeginForm())
    {
        <input placeholder="Search Term" name="searchTerm"/>
        <button type="submit" class="btn btn-primary" id="seachVal">Search</button>
    }
</div>

<br />

<div id="tableSection">
<table class="table table-striped table-dark">
    <thead>
        <tr>
            <th>Name</th>
            <th>Id</th>
            <th>Name Type</th>
            <th>Rec Class</th>
            <th>Mass (g)</th>
            <th>Fall</th>
            <th>Year</th>
            <th>Latitude</th>
            <th>Longitude</th>
        </tr>
    </thead>
    <tbody>
        @foreach (MeteroiteBackEnd.MeteoriteApiModel.WebModel item in Model)
        {
            <tr>
                <td>@item.name</td>
                <td>@item.id</td>
                <td>@item.nametype</td>
                <td>@item.recclass</td>
                <td>@item.mass</td>
                <td>@item.fall</td>
                <td>@item.year</td>
                <td>@item.geoLat</td>
                <td>@item.geoLang</td>
                @*if (@item.geoLocation == null || @item.geoLocation == new GeoLocation() { latitude = null, longitude = null }) {
                    <td>NaN</td>
                    <td>NaN</td>
                } else {
                    <td>@item.geoLocation.latitude</td>
                    <td>@item.geoLocation.longitude</td>
                }*@
            </tr>
        }
    </tbody>
</table>
</div>

<script>
    $('#searchVal').on('click', function() {
        $('#tableSection').empty().html(
            `<div class="d-flex justify-content-center">
              <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>`
        )
    })
</script>